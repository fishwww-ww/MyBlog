---
title: FastGPT实习：从渲染和请求的时序中学习React设计哲学
date: 2025-10-08 10:40:27
tags: 实习经历
---

# 从渲染和请求的时序中学习React设计哲学

需求分析：在 FastGPT 平台开发过程中，遇到组件渲染与异步请求时序问题

通过解决组件渲染空数组的问题，深入理解 React 的异步渲染机制和设计哲学

学习如何优雅地处理异步数据加载与组件渲染的协调

---

## 问题描述

打开一个modal时, 网络请求已经获取到了数据, 但是modal没有渲染出数据

### 核心问题

组件渲染和API请求是异步进行的，导致组件优先渲染了变量的初值（空数组）

当异步请求获取到数据，填充到数组中时，组件已经渲染完毕了

最终结果就是渲染了空数组

### 问题影响

- 用户看到空白或加载状态
- 数据更新后界面不会自动刷新
- 用户体验不佳

---

## 解决方案

### 技术方案

使用 `useMemo` 来缓存数组，并将请求的数据变量作为依赖项

请求成功，依赖项变化，更新数组，进而重新渲染组件

解决渲染空数组的问题

### 实现原理

1. 组件初始渲染时显示空数组
2. 异步请求开始执行
3. 请求完成后，依赖项更新
4. `useMemo` 检测到依赖变化，重新计算
5. 组件重新渲染，显示实际数据

---

## 方案优点

### 性能优化

不会因为某一个数组在加载中，而阻塞渲染，让整个组件树等待，提升使用体验

可以让多个数据源同时加载，并发渲染

### 用户体验

- 页面快速响应，不会出现长时间白屏
- 数据加载过程中有明确的加载状态
- 数据更新后界面自动刷新

---

## React 的设计哲学

### 渲染机制

React 遵循以下设计原则：

1. **组件先渲染初始状态**（loading 或 empty state）
2. **异步获取数据**
3. **数据返回后重新渲染**（显示实际内容）

### 实际应用

这种设计哲学使得 React 应用能够：

- 快速响应用户交互
- 优雅地处理异步数据
- 提供良好的用户体验
- 支持复杂的应用状态管理

---

## 总结

通过解决异步请求与组件渲染的时序问题，深入理解了 React 的设计哲学

React 鼓励开发者将异步操作与 UI 渲染解耦，通过声明式的方式管理状态

这种设计不仅提升了性能，也改善了用户体验，是现代前端框架的重要特征